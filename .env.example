# DICT LBPay - Environment Variables (Development)
# Copy this file to .env and adjust values as needed

# ============================================================================
# DATABASE (PostgreSQL)
# ============================================================================
DB_HOST=localhost
DB_PORT=5432
DB_USER=dict_admin
DB_PASSWORD=dict_password_dev
DB_NAME=dict
DB_SSL_MODE=disable
DB_MAX_OPEN_CONNS=25
DB_MAX_IDLE_CONNS=5
DB_CONN_MAX_LIFETIME=300s

# Service-specific databases
CONN_DICT_DB_NAME=conn_dict
CONN_DICT_DB_USER=conn_dict_user
CONN_DICT_DB_PASSWORD=conn_dict_password_dev

CONN_BRIDGE_DB_NAME=conn_bridge
CONN_BRIDGE_DB_USER=conn_bridge_user
CONN_BRIDGE_DB_PASSWORD=conn_bridge_password_dev

CORE_DICT_DB_NAME=core_dict
CORE_DICT_DB_USER=core_dict_user
CORE_DICT_DB_PASSWORD=core_dict_password_dev

# ============================================================================
# CACHE (Redis)
# ============================================================================
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0
REDIS_POOL_SIZE=10
REDIS_MIN_IDLE_CONNS=2
REDIS_MAX_RETRIES=3
REDIS_DIAL_TIMEOUT=5s
REDIS_READ_TIMEOUT=3s
REDIS_WRITE_TIMEOUT=3s

# ============================================================================
# WORKFLOW ENGINE (Temporal)
# ============================================================================
TEMPORAL_HOST=localhost
TEMPORAL_PORT=7233
TEMPORAL_NAMESPACE=default
TEMPORAL_TASK_QUEUE=dict-tasks
TEMPORAL_WORKFLOW_ID_PREFIX=dict-workflow-
TEMPORAL_METRICS_PORT=9091

# ============================================================================
# MESSAGE BROKER (Pulsar)
# ============================================================================
PULSAR_URL=pulsar://localhost:6650
PULSAR_ADMIN_URL=http://localhost:8080
PULSAR_TOPIC_PREFIX=persistent://public/default/dict-
PULSAR_SUBSCRIPTION_PREFIX=dict-sub-
PULSAR_PRODUCER_NAME=dict-producer
PULSAR_CONSUMER_NAME=dict-consumer

# Topics
PULSAR_TOPIC_CLAIM_EVENTS=dict-claim-events
PULSAR_TOPIC_ENTRY_EVENTS=dict-entry-events
PULSAR_TOPIC_INFRACTION_EVENTS=dict-infraction-events
PULSAR_TOPIC_AUDIT_EVENTS=dict-audit-events

# ============================================================================
# SECRETS MANAGEMENT (Vault)
# ============================================================================
VAULT_ADDR=http://localhost:8200
VAULT_TOKEN=dict-root-token
VAULT_PATH_PREFIX=secret/dict/
VAULT_SKIP_VERIFY=true

# ============================================================================
# OBSERVABILITY
# ============================================================================
# Prometheus
PROMETHEUS_URL=http://localhost:9090
METRICS_PORT=9091

# Grafana
GRAFANA_URL=http://localhost:3000
GRAFANA_USER=admin
GRAFANA_PASSWORD=admin

# Jaeger
JAEGER_COLLECTOR_URL=http://localhost:14268/api/traces
JAEGER_AGENT_HOST=localhost
JAEGER_AGENT_PORT=6831
JAEGER_SAMPLER_TYPE=const
JAEGER_SAMPLER_PARAM=1

# ============================================================================
# SERVICE PORTS
# ============================================================================
# conn-dict
CONN_DICT_GRPC_PORT=9092
CONN_DICT_HTTP_PORT=8081
CONN_DICT_METRICS_PORT=9093

# conn-bridge
CONN_BRIDGE_GRPC_PORT=9094
CONN_BRIDGE_HTTP_PORT=8082
CONN_BRIDGE_METRICS_PORT=9095

# core-dict
CORE_DICT_REST_PORT=8080
CORE_DICT_GRPC_PORT=9090
CORE_DICT_METRICS_PORT=9091

# ============================================================================
# APPLICATION
# ============================================================================
APP_ENV=development
APP_LOG_LEVEL=debug
APP_LOG_FORMAT=json
APP_NAME=dict-lbpay
APP_VERSION=1.0.0

# ============================================================================
# BACEN DICT (External API)
# ============================================================================
BACEN_DICT_URL=https://dict-hom.bcb.gov.br
BACEN_ISPB=12345678
BACEN_CERT_PATH=/path/to/cert.pem
BACEN_KEY_PATH=/path/to/key.pem
BACEN_CA_PATH=/path/to/ca.pem

# ============================================================================
# SECURITY
# ============================================================================
JWT_SECRET=your-secret-key-change-in-production
JWT_EXPIRATION=24h
API_KEY=your-api-key-change-in-production

# mTLS
MTLS_ENABLED=false
MTLS_CERT_PATH=/path/to/server-cert.pem
MTLS_KEY_PATH=/path/to/server-key.pem
MTLS_CA_PATH=/path/to/ca.pem
MTLS_VERIFY_CLIENT=false

# ============================================================================
# FEATURE FLAGS
# ============================================================================
FEATURE_CLAIM_WORKFLOW_ENABLED=true
FEATURE_FRAUD_DETECTION_ENABLED=false
FEATURE_RATE_LIMITING_ENABLED=true
FEATURE_CIRCUIT_BREAKER_ENABLED=true
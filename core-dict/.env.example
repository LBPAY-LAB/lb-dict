# ============================================
# Core DICT - Environment Variables Example
# ============================================

# -------------------- Application --------------------
APP_ENV=development
APP_NAME=core-dict
APP_VERSION=1.0.0

# HTTP Server Configuration
HTTP_PORT=8080
HTTP_READ_TIMEOUT=30s
HTTP_WRITE_TIMEOUT=30s
HTTP_IDLE_TIMEOUT=120s

# gRPC Server Configuration
GRPC_PORT=9090
GRPC_MAX_CONCURRENT_STREAMS=100

# -------------------- Database --------------------
# PostgreSQL Configuration
DATABASE_URL=postgres://dict_app:secure_password_here@localhost:5432/lbpay_core_dict?sslmode=disable

# Database Connection Pool
DB_MAX_OPEN_CONNS=100
DB_MAX_IDLE_CONNS=10
DB_CONN_MAX_LIFETIME=3600s

# -------------------- Redis --------------------
# Redis Configuration
REDIS_URL=redis://localhost:6379/0
REDIS_PASSWORD=
REDIS_DB=0
REDIS_POOL_SIZE=10
REDIS_MIN_IDLE_CONNS=5
REDIS_MAX_RETRIES=3

# Cache TTL
CACHE_ENTRY_TTL=300s
CACHE_ACCOUNT_TTL=600s

# -------------------- Apache Pulsar --------------------
# Pulsar Configuration
PULSAR_URL=pulsar://localhost:6650

# Pulsar Topics
PULSAR_TOPIC_KEY_EVENTS=persistent://dict/events/key-events
PULSAR_TOPIC_CLAIM_EVENTS=persistent://dict/events/claim-events
PULSAR_TOPIC_DICT_REQ_OUT=persistent://lb-conn/dict/rsfn-dict-req-out
PULSAR_TOPIC_DICT_RES_IN=persistent://lb-conn/dict/rsfn-dict-res-in

# Pulsar Consumer
PULSAR_CONSUMER_SUBSCRIPTION=core-dict-sub
PULSAR_CONSUMER_TYPE=shared

# -------------------- Participant ISPB --------------------
# LBPay ISPB (Identificador do Participante)
PARTICIPANT_ISPB=12345678
PARTICIPANT_NAME=LBPay

# -------------------- Authentication & Security --------------------
# JWT Configuration
JWT_SECRET=your_jwt_secret_here_change_in_production
JWT_EXPIRATION=24h
JWT_ISSUER=core-dict
JWT_AUDIENCE=lbpay-clients

# API Keys (for service-to-service communication)
API_KEY_LB_CONNECT=your_api_key_here
API_KEY_BACKOFFICE=your_api_key_here

# -------------------- Logging --------------------
# Log Configuration
LOG_LEVEL=debug
LOG_FORMAT=json
LOG_OUTPUT=stdout

# -------------------- Observability --------------------
# Prometheus Metrics
METRICS_ENABLED=true
METRICS_PORT=9091
METRICS_PATH=/metrics

# OpenTelemetry Tracing
OTEL_ENABLED=true
OTEL_EXPORTER_OTLP_ENDPOINT=http://localhost:4318
OTEL_SERVICE_NAME=core-dict
OTEL_TRACE_RATIO=1.0

# -------------------- Feature Flags --------------------
# Feature toggles
FEATURE_AUTO_CLAIM_CONFIRMATION=true
FEATURE_OTP_VALIDATION=true
FEATURE_TWO_FACTOR_DELETE=true

# -------------------- Rate Limiting --------------------
# API Rate Limiting (requests per minute)
RATE_LIMIT_ENABLED=true
RATE_LIMIT_REQUESTS_PER_MINUTE=100
RATE_LIMIT_BURST=20

# -------------------- External Services --------------------
# Bacen DICT API (Mock for development)
BACEN_API_URL=https://api-dict-mock.lbpay.local
BACEN_API_TIMEOUT=30s
BACEN_API_RETRY_COUNT=3

# -------------------- Migration --------------------
# Database Migration Configuration
MIGRATION_AUTO_RUN=false
MIGRATION_PATH=./migrations

# -------------------- Development --------------------
# Development mode settings
DEV_MODE=true
DEV_HOT_RELOAD=true
DEV_MOCK_BACEN=true
DEV_SEED_DATA=false

# -------------------- Testing --------------------
# Test Database (for integration tests)
TEST_DATABASE_URL=postgres://dict_app:test_password@localhost:5433/lbpay_core_dict_test?sslmode=disable

# -------------------- Docker Compose --------------------
# Used by docker-compose.yml
POSTGRES_DB=lbpay_core_dict
POSTGRES_USER=dict_app
POSTGRES_PASSWORD=secure_password_here

# -------------------- Health Check --------------------
HEALTH_CHECK_INTERVAL=30s
HEALTH_CHECK_TIMEOUT=10s

# -------------------- Timeouts --------------------
# Request timeouts
REQUEST_TIMEOUT=30s
SHUTDOWN_TIMEOUT=30s

# -------------------- CORS --------------------
# CORS Configuration (for HTTP API)
CORS_ALLOWED_ORIGINS=http://localhost:3000,http://localhost:8080
CORS_ALLOWED_METHODS=GET,POST,PUT,DELETE,OPTIONS
CORS_ALLOWED_HEADERS=Content-Type,Authorization
CORS_ALLOW_CREDENTIALS=true

# -------------------- Miscellaneous --------------------
# Timezone
TZ=America/Sao_Paulo

# Locale
LOCALE=pt_BR

# Max request body size (bytes)
MAX_REQUEST_BODY_SIZE=1048576

# Enable request ID generation
ENABLE_REQUEST_ID=true
